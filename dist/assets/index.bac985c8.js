import{R as V,S as W,P as z,W as D,O as E,a as A,M as G,D as H,F as Z,b as O,c as F,A as N,d as R,e as S,f as T,T as U,G as q,g as I,h as K,B as _,i as J}from"./vendor.0b5080dc.js";const Q=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function i(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(e){if(e.ep)return;e.ep=!0;const s=i(e);fetch(e.href,s)}};Q();const c={plane:{width:250,height:250,widthSegments:50,heightSegments:50}};function $(){r.geometry.dispose(),r.geometry=new A(c.plane.width,c.plane.height,c.plane.widthSegments,c.plane.heightSegments);const{array:n}=r.geometry.attributes.position,o=[];for(let t=0;t<n.length;t++){if(t%3===0){const e=n[t],s=n[t+1],a=n[t+2];n[t]=e+(Math.random()-.5)*3,n[t+1]=s+(Math.random()-.5)*3,n[t+2]=a+(Math.random()-.5)*3}o.push(Math.random()*Math.PI*2)}r.geometry.attributes.position.randomValues=o,r.geometry.attributes.position.originalPosition=r.geometry.attributes.position.array;const i=[];for(let t=0;t<r.geometry.attributes.position.count;t++)i.push(0,.19,.4);r.geometry.setAttribute("color",new _(new Float32Array(i),3))}const m=new V,d=new W,f=new z(75,innerWidth/innerHeight,.1,1e3),b=new D;b.setSize(innerWidth,innerHeight);b.setPixelRatio(devicePixelRatio);document.body.appendChild(b.domElement);new E(f,b.domElement);f.position.z=50;const k=new A(c.plane.width,c.plane.height,c.plane.widthSegments,c.plane.heightSegments),ee=new G({side:H,flatShading:Z,vertexColors:!0}),r=new O(k,ee);d.add(r);$();const v=new F(16777215,1);v.position.set(0,1,1);const te=new N(16711935),X=new F(16777215,1);X.position.set(0,0,-1);d.add(v,X,te);const w=new R;f.add(w);const p=new S(w);d.add(p);const h=new S(w);d.add(h);const g=new S(w);d.add(g);const y=new S(w);d.add(y);const x=new T;x.load("sounds/lemmings.mp3",function(n){y.setBuffer(n),y.setLoop(!0),y.setVolume(.1),y.play()});const u={x:void 0,y:void 0},ne=new U,oe=ne.load("/textures/NormalMap.png"),C=new q;let l,L=[];C.load("assets/scene.gltf",function(n){n.scene.userData={name:"elf"};let o;o=n.scene,o.scale.y=200,o.scale.x=200,o.scale.z=200,d.add(o),L.push(o)},void 0,function(n){console.error(n)});C.load("banana/scene.gltf",function(n){n.scene.userData={id:"banana"},l=n.scene,l.scale.y=200,l.scale.x=200,l.scale.z=200,d.add(l),L.push(l)},void 0,function(n){console.error(n)});C.load("shiba/scene.gltf",function(n){n.scene.userData={id:"dog"};let o=n.scene;o.scale.set(10,10,10),o.position.x=100,o.position.z=100,d.add(o),L.push(o)},void 0,function(n){console.error(n)});let P=0;function Y(){requestAnimationFrame(Y),b.render(d,f),m.setFromCamera(u,f),P+=.01,l&&(l.rotation.y+=.01),B.forEach(e=>{e.position.y-=5,e.position.y<-window.innerHeight/2&&(e.position.y=window.innerHeight/2,e.material.opacity=0),e.material.opacity<1&&(e.material.opacity+=.005)});const{array:n,originalPosition:o,randomValues:i}=r.geometry.attributes.position;for(let e=0;e<n.length;e+=3)n[e]=o[e]+Math.cos(P+i[e])*.01,n[e+1]=o[e+1]+Math.sin(P+i[e+1])*.001;r.geometry.attributes.position.needsUpdate=!0;const t=m.intersectObject(r);if(t.length>0){const{color:e}=t[0].object.geometry.attributes;e.setX(t[0].face.a,.1),e.setY(t[0].face.a,.5),e.setZ(t[0].face.a,1),e.setX(t[0].face.b,.1),e.setY(t[0].face.b,.5),e.setZ(t[0].face.b,1),e.setX(t[0].face.c,.1),e.setY(t[0].face.c,.5),e.setZ(t[0].face.c,1),t[0].object.geometry.attributes.color.needsUpdate=!0;const s={r:0,g:.19,b:.4},a={r:.1,g:.5,b:1};J.to(a,{r:s.r,g:s.g,b:s.b,duration:1,onUpdate:()=>{e.setX(t[0].face.a,a.r),e.setY(t[0].face.a,a.g),e.setZ(t[0].face.a,a.b),e.setX(t[0].face.b,a.r),e.setY(t[0].face.b,a.g),e.setZ(t[0].face.b,a.b),e.setX(t[0].face.c,a.r),e.setY(t[0].face.c,a.g),e.setZ(t[0].face.c,a.b),e.needsUpdate=!0}})}}let M;const se=new I(10,3,16,100),ae=new K({color:2985803,metalness:.7,normalMap:oe,roughness:.2});function j(n,o){return n+Math.random()*(o-n)}const B=[];for(let n=0;n<300;n++)M=new O(se,ae),M.position.set(j(-c.plane.width/2,c.plane.width/2),j(-c.plane.width/2,c.plane.width/2),j(-90,300)),B.push(M),d.add(M);Y();addEventListener("mousemove",n=>{u.x=n.clientX/innerWidth*2-1,u.y=-(n.clientY/innerHeight)*2+1,ie()});function ie(){m.setFromCamera(u,f),m.intersectObjects(L,!0).length>0?document.body.style.cursor="pointer":document.body.style.cursor="default"}addEventListener("mouseup",n=>{u.x=n.clientX/innerWidth*2-1,u.y=-(n.clientY/innerHeight)*2+1,m.setFromCamera(u,f);const o=m.intersectObjects(L,!0);if(o.length>0&&o[0]){let i=o[0].object.parent.name;console.log(i),i.includes("polySurface")?x.load("sounds/dog_bark.mp3",function(t){p.setBuffer(t),p.setLoop(!1),p.setVolume(1),p.play()}):i.includes("mushroom")?x.load("sounds/fairy.mp3",function(t){h.setBuffer(t),h.setLoop(!1),h.setVolume(1),h.play()}):i.includes("Banana")&&x.load("sounds/banana.mp3",function(t){g.setBuffer(t),g.setLoop(!1),g.setVolume(1),g.play()})}});
